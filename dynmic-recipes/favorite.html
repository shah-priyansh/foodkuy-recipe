<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <title>Favoriti - Bakine tajne</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-touch-fullscreen" content="yes">
    <meta name="HandheldFriendly" content="True">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    
    <!-- Bootstrap v4.3.1 CSS -->
    <link rel="stylesheet" href="lib/bootstrap/css/bootstrap.min.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/theme.css">
    <link rel="stylesheet" href="css/theme/themelibrary.css">
    <!-- Slick CSS -->
    <link rel="stylesheet" type="text/css" href="lib/slick/slick/slick.css">
    <link rel="stylesheet" type="text/css" href="lib/slick/slick/slick-theme.css">
    <!-- Magnific Popup core CSS file -->
    <link rel="stylesheet" href="lib/Magnific-Popup-master/dist/magnific-popup.css">
    <!-- Font Awesome Free 5.10.2 JS -->
    <script defer src="lib/fontawesome-free-5.10.2-web/js/brands.js"></script>
    <script defer src="lib/fontawesome-free-5.10.2-web/js/solid.js"></script>
    <script defer src="lib/fontawesome-free-5.10.2-web/js/fontawesome.js"></script>
  </head>
  <body class="default">
    <!-- Preloading -->
    <div class="preloading">
      <div class="wrap-preload">
        <div class="cssload-loader"></div>
      </div>
    </div>
    <!-- .Preloading -->
    <div class="wrapper">
      <!-- Sidebar left -->
      <nav id="sidebarleft" class="sidenav">
        <div id="dismiss">
          <i class="fas fa-times"></i>
        </div>
        <div class="sidebar-header">
          <h3>Account</h3>
        </div>
        <div class="sdprofile">
          <div class="sdp-left">
            <img src="img/profile5.jpg" alt="profile">
          </div>
          <div class="sdp-right">
            <div class="sd-name">Sarah Corner</div>
            <div class="sd-status">Exclusive Author</div>
          </div>
        </div>
        <ul class="list-unstyled components">
          <li>
            <a href="index.html"><i class="fas fa-home"></i> Home</a>
          </li>
          <li>
            <a href="#pagemyaccount" data-toggle="collapse" aria-expanded="false"><i class="fas fa-user"></i> My Account <span><i class="fas fa-caret-down"></i></span></a>
            <ul class="collapse collapsible-body" id="pagemyaccount">
              <li>
                <a href="new_recipe.html">Add new recipe</a>
              </li>
              <li>
                <a href="profile.html">Profile</a>
              </li>
              <li>
                <a href="setting.html">Setting</a>
              </li>
            </ul>
          </li>
          <li>
            <a href="#pagesubmenu" data-toggle="collapse" aria-expanded="false"><i class="fas fa-clone"></i> Pages <span><i class="fas fa-caret-down"></i></span></a>
            <ul class="collapse collapsible-body" id="pagesubmenu">
              <li>
                <a href="index.html">Home</a>
              </li>
              <li>
                <a href="recipe_list.html">Recipe list</a>
              </li>
              <li>
                <a href="recipe_page.html">Recipe page</a>
              </li>
              <li>
                <a href="author.html">Author</a>
              </li>
              <li>
                <a href="feedback.html">Feedback</a>
              </li>
              <li>
                <a href="setting.html">Setting</a>
              </li>
              <li>
                <a href="gallery.html">Gallery</a>
              </li>
              <li>
                <a href="news_list.html">News list</a>
              </li>
              <li>
                <a href="news.html">News</a>
              </li>
              <li>
                <a href="register.html">Register</a>
              </li>
              <li>
                <a href="login.html">Login</a>
              </li>
              <li>
                <a href="new_recipe.html">New recipe</a>
              </li>
              <li>
                <a href="profile.html">Profile</a>
              </li>
              <li>
                <a href="favorite.html">Favoriti</a>
              </li>
              <li>
                <a href="single_page.html">Single page</a>
              </li>
              <li>
                <a href="404.html">404 error page</a>
              </li>
            </ul>
          </li>
          <li>
            <a href="favorite.html"><i class="fas fa-heart"></i> Favoriti</a>
          </li>
          <li>
            <a href="#"><i class="fas fa-star"></i> Rate</a>
          </li>
          <li>
            <a href="feedback.html"><i class="fas fa-envelope"></i> Feedback</a>
          </li>
          <li>
            <a href="setting.html"><i class="fas fa-cog"></i> Settings</a>
          </li>
          <li>
            <a href="single_page.html"><i class="fas fa-exclamation-circle"></i> About</a>
          </li>
        </ul>
      </nav>
      <!-- .Sidebar left -->
      <!-- Sidebar right -->
      <nav id="sidebarright" class="sidenav">
        <div id="dismiss">
          <i class="fas fa-times"></i>
        </div>
        <div class="sidebar-header">
          <h3>Let's eat!</h3>
        </div>
        <div class="search-form">
          <div class="search-wrapper ">
            <input id="search">
            <button class="ssubmit" type="submit" name="search_submit"><i class="fas fa-search"></i></button>
          </div>
          <ul class="right-menu">
            <li class="right-menu-item">
              <a href="#menu-dinner" data-toggle="collapse" aria-expanded="false"><i class="fas fa-plus"></i> Dinner <span><i class="fas fa-caret-down"></i></span></a>
              <ul class="collapse collapsible-body" id="menu-dinner">
                <li>
                  <a href="#">Soup Recipes
                    <div class="count">3</div>
                  </a>
                </li>
                <li>
                  <a href="#">Bread Recipes
                    <div class="count">2</div>
                  </a>
                </li>
                <li>
                  <a href="#">Low Calorie
                    <div class="count">32</div>
                  </a>
                </li>
              </ul>
            </li>
            <li class="right-menu-item">
              <a href="#menu-lunch" data-toggle="collapse" aria-expanded="false"><i class="fas fa-plus"></i> Lunch <span><i class="fas fa-caret-down"></i></span></a>
              <ul class="collapse collapsible-body" id="menu-lunch">
                <li>
                  <a href="#">Taco Recipes
                    <div class="count">3</div>
                  </a>
                </li>
                <li>
                  <a href="#">Fruit
                    <div class="count">8</div>
                  </a>
                </li>
                <li>
                  <a href="#">Pasta
                    <div class="count">2</div>
                  </a>
                </li>
              </ul>
            </li>
            <li class="right-menu-item">
              <a href="#"><i class="fas fa-plus"></i> Breakfast
                <div class="count">3</div>
              </a>
            </li>
            <li class="right-menu-item">
              <a href="#"><i class="fas fa-plus"></i> Baking Recipes
                <div class="count">45</div>
              </a>
            </li>
            <li class="right-menu-item">
              <a href="#menu-quick" data-toggle="collapse" aria-expanded="false"><i class="fas fa-plus"></i>Quick & Easy Recipes <span><i class="fas fa-caret-down"></i></span></a>
              <ul class="collapse collapsible-body" id="menu-quick">
                <li>
                  <a href="#">Seafood
                    <div class="count">9</div>
                  </a>
                </li>
                <li>
                  <a href="#">Chicken Recipes
                    <div class="count">14</div>
                  </a>
                </li>
                <li>
                  <a href="#">Beef
                    <div class="count">7</div>
                  </a>
                </li>
              </ul>
            </li>
            <li class="right-menu-item">
              <a href="#"><i class="fas fa-plus"></i> Chicken Recipes
                <div class="count">66</div>
              </a>
            </li>
            <li class="right-menu-item">
              <a href="#"><i class="fas fa-plus"></i> Soup Recipes
                <div class="count">8</div>
              </a>
            </li>
            <li class="right-menu-item">
              <a href="#"><i class="fas fa-plus"></i> Taco Recipes
                <div class="count">2</div>
              </a>
            </li>
            <li class="right-menu-item">
              <a href="#"><i class="fas fa-plus"></i> Bread Recipes
                <div class="count">100</div>
              </a>
            </li>
            <li class="right-menu-item">
              <a href="#"><i class="fas fa-plus"></i> Cake Recipes
                <div class="count">45</div>
              </a>
            </li>
            <li class="right-menu-item">
              <a href="#"><i class="fas fa-plus"></i> Dessert
                <div class="count">43</div>
              </a>
            </li>
            <li class="right-menu-item">
              <a href="#"><i class="fas fa-plus"></i> Healthy
                <div class="count">20</div>
              </a>
            </li>
            <li class="right-menu-item">
              <a href="#"><i class="fas fa-plus"></i> Sandwiches
                <div class="count">93</div>
              </a>
            </li>
          </ul>
        </div>
      </nav>
      <!-- .Sidebar right-->
      <!-- Page content  -->
      <div id="content">
        <!-- Header  -->
        <nav class="navbar navbar-expand-lg navbar-light bg-header">
          <div class="" style="display: flex; width: 100%;">
            <button type="button" onclick="history.back()" class="btn">
              <i class="fas fa-arrow-left"></i>
            </button>
            <div class="logo" style="   
                align-items: center;
                justify-content: start;
                width: 100%;">Moji favoriti </div>
           
          </div>
        </nav>
        <!-- .Header  -->
        <!-- Content Wrap  -->
        <div class="content-wrap">
          <div id="favoritesList" class="recipes-list">
            <!-- Favorites will be loaded here -->
          </div>
          
          <!-- Empty state -->
          <div id="emptyState" class="empty-state" style="display: none;">
            <div class="empty-state-icon">
              <i class="fas fa-heart-broken"></i>
            </div>
            <h3>No Favoriti Yet</h3>
            <p>Start adding your favorite recipes!</p>
          </div>
        </div>
        <!-- .Content wrap  -->
        <!-- Footer  -->
        <div class="footer">
          <div class="footer-heading">Follow Us</div>
          <div class="socmed">
            <div class="socmed-line">
              <div class="socmed-item">
                <a href="#" class="si-icon"> <i class="fab fa-facebook-f"></i></a>
              </div>
            </div>
            <div class="socmed-line">
              <div class="socmed-item">
                <a href="#" class="si-icon"><i class="fab fa-instagram"></i></a>
              </div>
            </div>
            <div class="socmed-line">
              <div class="socmed-item">
                <a href="#" class="si-icon"><i class="fab fa-twitter"></i></a>
              </div>
            </div>
            <div class="socmed-line">
              <div class="socmed-item">
                <a href="#" class="si-icon"><i class="fab fa-youtube"></i></a>
              </div>
            </div>
          </div>
        </div>
        <!-- .Footer  -->
      </div>
      <!-- .Page content  -->
      <div class="overlay"></div>
      <!-- Optional JavaScript -->
      <!-- jQuery v3.4.1 -->
      <script src="lib/jquery/jquery-3.4.1.min.js"></script>
      <!--  Bootstrap v4.3.1 JS -->
      <script src="lib/bootstrap/js/bootstrap.min.js"></script>
      <!-- Magnific Popup core JS file -->
      <script src="lib/Magnific-Popup-master/dist/jquery.magnific-popup.js"></script>
      <!-- Slick JS -->
      <script src="lib/slick/slick/slick.min.js"></script>
      <!--  Custom JS -->
      <script src="js/theme.js"></script>
      <script>
        $(document).ready(function() {
          const favoritesList = document.getElementById('favoritesList');
          const emptyState = document.getElementById('emptyState');

          // Load favorites from localStorage
          function loadFavorites() {
            const favorites = JSON.parse(localStorage.getItem('favorites') || '[]');
            
            if (favorites.length === 0) {
              emptyState.style.display = 'flex';
              favoritesList.style.display = 'none';
              return;
            }

            emptyState.style.display = 'none';
            favoritesList.style.display = 'block';

            // Sort favorites by date added (newest first)
            favorites.sort((a, b) => new Date(b.dateAdded) - new Date(a.dateAdded));

            // Generate HTML for each favorite recipe
            const html = favorites.map(recipe => {
              const recipeUrl = `recipe_page.html?title=${encodeURIComponent(recipe.title)}&category=${encodeURIComponent(recipe.category)}&image=${encodeURIComponent(recipe.image)}&file=${encodeURIComponent(recipe.docFile)}`;
              return `
              <div class="recipe-card" style="cursor: pointer;" onclick="window.location.href='${recipeUrl}'">
                <div class="recipe-image">
                  <img src="${recipe.image || 'images/placeholder.jpg'}" alt="${recipe.title}">
                  <button class="remove-favorite" onclick="removeFavoriteHandler(event, '${recipe.title}')">
                    <i class="fas fa-times"></i>
                  </button>
                </div>
                <div class="recipe-content">
                  <h3 class="recipe-title">
                    <a href="${recipeUrl}">
                      ${recipe.title}
                    </a>
                  </h3>
                  ${recipe.category ? `<span class="recipe-category">${recipe.category}</span>` : ''}
                </div>
              </div>
            `}).join('');

            favoritesList.innerHTML = html;
          }

          // A new handler to prevent redirection when removing a favorite
          window.removeFavoriteHandler = function(event, title) {
            event.stopPropagation();
            window.removeFavorite(title);
          };

          // Remove a recipe from favorites
          window.removeFavorite = function(title) {
            const favorites = JSON.parse(localStorage.getItem('favorites') || '[]');
            const index = favorites.findIndex(fav => fav.title === title);
            
            if (index !== -1) {
              favorites.splice(index, 1);
              localStorage.setItem('favorites', JSON.stringify(favorites));
              showToast('Recipe removed from favorites');
              loadFavorites();
            }
          };

          // Show toast message
          function showToast(message) {
            const toast = document.createElement('div');
            toast.className = 'toast-message';
            toast.textContent = message;
            document.body.appendChild(toast);
            
            setTimeout(() => {
              toast.classList.add('show');
              setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => {
                  toast.remove();
                }, 300);
              }, 2000);
            }, 100);
          }

          // Load favorites on page load
          loadFavorites();
        });
      </script>
      <style>
        .recipes-list {
          padding: 15px;
        }

        .recipe-card {
          background: white;
          border-radius: 8px;
          box-shadow: 0 2px 4px rgba(0,0,0,0.1);
          margin-bottom: 15px;
          overflow: hidden;
        }

        .recipe-image {
          position: relative;
          height: 200px;
          overflow: hidden;
        }

        .recipe-image img {
          width: 100%;
          height: 100%;
          object-fit: cover;
        }

        .remove-favorite {
          position: absolute;
          top: 10px;
          right: 10px;
          background: rgba(0,0,0,0.5);
          border: none;
          color: white;
          width: 30px;
          height: 30px;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          cursor: pointer;
        }

        .recipe-content {
          padding: 15px;
        }

        .recipe-title {
          margin: 0 0 10px;
          font-size: 18px;
        }

        .recipe-title a {
          color: #333;
          text-decoration: none;
        }

        .recipe-category {
          font-size: 14px;
          color: #666;
          display: inline-block;
          padding: 3px 8px;
          background: #f0f0f0;
          border-radius: 4px;
        }

        .empty-state {
          display: none;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          text-align: center;
          padding: 40px 20px;
          color: #666;
        }

        .empty-state-icon {
          font-size: 48px;
          color: #ccc;
          margin-bottom: 20px;
        }

        .empty-state h3 {
          margin: 0 0 10px;
          font-size: 20px;
        }

        .empty-state p {
          margin: 0;
          color: #999;
        }

        .toast-message {
          position: fixed;
          bottom: 20px;
          left: 50%;
          transform: translateX(-50%) translateY(100px);
          background: rgba(0, 0, 0, 0.8);
          color: white;
          padding: 12px 24px;
          border-radius: 4px;
          z-index: 1000;
          opacity: 0;
          transition: all 0.3s ease;
        }

        .toast-message.show {
          transform: translateX(-50%) translateY(0);
          opacity: 1;
        }
      </style>
    </div>
  </body>
</html>